> 掘金小册 作者：SH的全栈笔记
>
> 基础篇简单带过

## 基础

### 核心组件

- Broker：接收消息，发送消息，分布式存储消息
- Topic：一类或者说一大类消息的集合，逻辑概念
- MessageQueue：Topic的再次划分
- NameServer：RocketMQ 集群的大脑，Broker 会将自己注册到每一个 NameServer 上

**疑问？当我创建一个Topic并指4个队列时，队列在Broker上是如何分布的？（三主三从架构）**

### 核心特性

![](https://yitiaoit.oss-cn-beijing.aliyuncs.com/img/image-20230307160949192.png)

**顺序消费**

分区有序和全局有序，全局有序下只有一个MessageQueue，不支持并行消费

**消息过滤**

使用Tag为消息分类过滤

**事务消息**

把对数据库操作的本地事务和往MQ投递消息这一动作合在一起作为一个事务，如果投递失败，那本地事务也需要回滚。

**延迟队列**

指定级别的延迟时间

> 1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h

**死信队列**

处理达到最大的重试次数（默认是 16 次）仍然无法正常消费的消息，所有的死信队列都会带上 %DLQ% 的前缀，然后后面跟上消费者组的名称，并且这个 Topic 对消费者来说是不可见的。

放进死信队列之后，Message 会在 3 天之后过期。

## 源码

> 环境搭建请转到 09-儒猿-RocketMQ源码



