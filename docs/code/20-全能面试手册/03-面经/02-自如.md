### 自如

> 20230526 

**面试**

（面试官可能不了解Netty，没做算法题）

主问项目：

- rpc的框架：设计架构、如何使用(与Spring结合)、`如何推广`、如何做的拦截过滤（不做鉴权只做传递，鉴权不能依赖别的服务）、为什么要自研、有哪些性能提升、几个人开发的、如何做版本控制、出过什么重大问题、MemoryFactory是线程安全的吗
- RocketMQ：如何落盘、如何保证高可用、`如何实现延迟队列（时间片算法）`
- redis：`如何查找大KEY`，如何保证数据一致性
- JVM：`举一个内存泄漏的场景`

为什么离职？

期望薪资？

**答疑**

开发和推广一个rpc框架需要耗费大量的人力和时间，一般不会轻易尝试。在推广阶段，可以先逐步逐步替换，同时使用异构化部署方案，由网关决定流量的去向，逐步加大新框架的流量。



RocketMQ：https://juejin.cn/book/7138560870908428320

- 写入CommitLog，满1G，写新的文件，按照offset命名
- broker启动时会start()很多handler来处理各种请求，MessageStore 是负责消息存储的核心组件，